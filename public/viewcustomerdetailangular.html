<html>
<head>
  <title>SaralHai</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body>
<nav class="green">
  <div class="nav-wrapper">
      <a href="#!" class="brand-logo"><i class="material-icons left">cloud</i>SaralHai</a>
       <ul class="right hide-on-med-and-down">
<!--               <li><a class="dropdown-button" href="#!" data-activates="new-order-dropdown">New Orders<i class="material-icons right">arrow_drop_down</i></a></li>
 -->        <li><a class="dropdown-button" href="#!" data-activates="order-dropdown">Details<i class="material-icons right">arrow_drop_down</i></a></li>
        <li><a href="vegetablelist.html" class="dropdown-button" data-activates="product-dropdown" ><i class="material-icons right">arrow_drop_down</i>Vegetable Prices and List</a></li>
        <li><a class="dropdown-button" data-activates="orderview-dropdown" ><i class="material-icons right">arrow_drop_down</i>Order</a></li>
        <li><a class="dropdown-button" data-activates="compilation-dropdown" ><i class="material-icons right">arrow_drop_down</i>Compilation</a></li>
      </ul>
    </div>
</nav>
<ul id="order-dropdown" class="dropdown-content">
  <li><a href="storeangular.html">Stores</a></li>
  <li><a href="customerangular.html">Customers</a></li>
</ul>
<ul id="orderview-dropdown" class="dropdown-content">
  <li><a href="viewstoreOrders.html">Store Order</a></li>
  <li><a href="customerOrderview.html">Customer Orders</a></li>
  <li><a href="storevegetables.html">Store Vegetables</a></li>
  <li><a href="customervegetables.html">Customer Vegetables</a></li>
</ul>
<ul id="product-dropdown" class="dropdown-content">
  <li><a href="productStoreview.html">For Stores</a></li>
  <li><a href="productCustomerview.html">For Customers</a></li>
</ul>
<ul id="compilation-dropdown" class="dropdown-content">
  <li><a href="vegetablecompilation.html">For Stores</a></li>
  <li><a href="customervegcompilation.html">For Customers</a></li>
</ul>
<ul id="new-order-dropdown" class="dropdown-content">
  <li><a href="addStoreOrder.html">For Stores</a></li>
  <li><a href="addCustomerOrder.html">For Customers</a></li>
</ul>
<div class="container" >
        <h4 class="center orange-text">Edit Customer</h4>
        
 <div class="row" ng-app="myApsp" ng-controller="EditCustomer">
 <p style="display: none;" id="Customer.customerID"></p>
    <form class="col s12">
      <div class="row">
        <div class="input-field col s6">
          <input id="stores_name" type="text" class="validate">
          <label for="stores_name">Customer Name</label>
        </div>
        <div class="input-field col s6">
          <input id="store_number" value="+914430490430" type="text" class="validate">
          <label for="store_number">Customer Number</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <input id="email" type="email" value = "thechaikaapi@gmail.com" class="validate">
          <label for="email">Email</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <input id="address" value="dfsdfdsfdsds" type="text">
          <label for="address">Address</label>
        </div>
      </div>
    <button a class="waves-effect waves-light btn center orange" onclick= "EditStore()">Make Changes</button>
    <a class="waves-effect waves-light btn center orange" onclick= "DeleteStore()" >Delete Store</a>
<p> {{Customer}}</p>
      </div>
    </form>
  </div>
  </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  var id = window.localStorage.getItem("id");
  var storename = window.localStorage.getItem("store_name");
  var storenumber = window.localStorage.getItem("store_number");
  var storeaddress = window.localStorage.getItem("store_address");
  var storeemail = window.localStorage.getItem("store_email");

  document.getElementById('stores_name').value = storename ;
  document.getElementById('store_number').value = storenumber ;
  document.getElementById('email').value = storeemail ; 
  document.getElementById('address').value = storeaddress;
  document.getElementById('Customer.customerID').value = id ;


  console.log(id);
  console.log(storename);
  console.log(storenumber);
  console.log(storeaddress);
  console.log(storeemail);

  function EditStore() {
    var edited_store_name = document.getElementById('stores_name').value ;
  var edited_store_number = document.getElementById('store_number').value ;
  var edited_store_email = document.getElementById('email').value ; 
  var edited_store_address = document.getElementById('address').value ;
  var edited_customer_id = document.getElementById('Customer.customerID').value;

  console.log("Ieee"+edited_customer_id+"Store NAme :"+edited_store_name+"\n Store Number : "+edited_store_number+"\n Store Email : "+edited_store_email+"\n Store Address :"+edited_store_address);

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      alert(this.responseText);
    }
  };
  xhttp.open("POST", "https://saralapis-demo.herokuapp.com/customer/edit?id="+edited_customer_id, true);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send("customername="+edited_store_name+"&number="+edited_store_number+"&email="+edited_store_number+"&email="+edited_store_email);
}

function DeleteStore(){
    var edited_customer_id = document.getElementById('Customer.customerID').value;
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      alert(this.responseText);
    }
  };
  xhttp.open("DELETE", "https://saralapis-demo.herokuapp.com/customer/delete?id="+edited_customer_id, true);
  // xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send();
}



  // }

</script>



  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  <script src="js/AppController.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="js/materialize.min.js"></script>
</body>
</html>